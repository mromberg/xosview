#
# Linux memstat Makefile template
#
#
# $Id: Makefile.linux.memstat.in,v 1.4 1999/11/05 05:39:04 romberg Exp $
#
CC     = gcc
# For some reason (which I am not sure of now), /usr/src/linux/include
# needs to be added to the search patch or things break.
CFLAGS = -D__KERNEL__ -Wall -Wstrict-prototypes -I/usr/src/linux/include \
         -O2 -fomit-frame-pointer -pipe -DMODULE @USE_MOD_VERSIONS@ @LINUX_SMP@
FEXT   = c


OBJS = \
memstat.o

DEPFILES := $(OBJS:%=.%.d)
CFILES := $(OBJS:.o=.$(FEXT))

#-----------------------------------------------------------------------

all: memstat.o

#Memstat.o: memstat.o
#	ld -m elf_i386 -r -o Memstat.o memstat.o

clean :
	rm -f $(DEPFILES) $(EXE) $(OBJS) *~ TAGS Memstat.o

tags TAGS :
	etags $(CFILES) *.h

%.o : %-@LVERSION@.$(FEXT)
	$(CC) $(CFLAGS) -c $< -o $@

%.o : %.$(FEXT)
	$(CC) $(CFLAGS) -c $< -o $@

.%.o.d : %.$(FEXT)
	@echo building dependencies for $<
	@$(SHELL) -ec '$(CC) -MM $(CFLAGS) $< \
          | sed '\''s/$*.o/$*.o $@/'\'' > $@'

@AUTODEPEND@
